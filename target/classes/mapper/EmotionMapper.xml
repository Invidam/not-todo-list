<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="repository.EmotionMapper">

    <select id="isExistEmotionRelation" parameterType="DTO.Emotion.EmotionWithUserDTO" resultType="boolean">
        SELECT IF(COUNT(*) != 0, 1, 0) FROM item_emotion WHERE item_id = #{itemId} and emotion_id = #{emotionId} and user_id = #{id}
    </select>
    <insert id="createEmotion" parameterType="DTO.Emotion.EmotionWithUserDTO">
        INSERT INTO item_emotion (item_id, emotion_id, user_id) VALUES(#{itemId},#{emotionId},#{id})
    </insert>

    <delete id="deleteEmotion" parameterType="DTO.Emotion.EmotionWithUserDTO">
        DELETE FROM item_emotion WHERE item_id=#{itemId} AND  emotion_id=#{emotionId} AND  user_id=#{id}
    </delete>
</mapper>
